# Context Engineering Guide for Sablia

This document explains how to use Context Engineering methodology with Claude Code to build features for the Sablia project.

## Quick Start

### Your First Feature

1. **Define** what you want in `INITIAL.md`:

   ```markdown
   ## FEATURE:

   Build a newsletter signup form that integrates with our email service

   ## EXAMPLES:

   - See examples/components/FormExample.tsx for form patterns

   ## DOCUMENTATION:

   - React Hook Form: https://react-hook-form.com/

   ## OTHER CONSIDERATIONS:

   - Must validate email format
   - Show success/error messages
   ```

2. **Generate** a comprehensive implementation plan:

   ```bash
   /generate-prp INITIAL.md
   ```

3. **Execute** the plan to build the feature:
   ```bash
   /execute-prp PRPs/newsletter-signup-form.md
   ```

That's it! The AI will build, test, and validate your feature.

## What is Context Engineering?

Context Engineering is the practice of providing AI coding assistants with comprehensive context so they can implement features successfully in one pass.

### Traditional Approach (Vibe Coding)

```
You: "Build me a contact form"
AI: *Creates something that might not match your patterns*
You: "No, use React Hook Form with Zod validation"
AI: *Fixes it, but still doesn't match your style*
You: "Also integrate with Calendly"
AI: *Multiple rounds of back-and-forth...*
```

### Context Engineering Approach

```
You: /execute-prp PRPs/contact-form-calendly.md
AI: *Reads complete context, patterns, examples*
AI: *Implements exactly what you need*
AI: *Validates everything works*
AI: ✅ Feature complete and tested
```

## The Context Engineering Workflow

```
┌─────────────┐
│ INITIAL.md  │  What you want to build
└──────┬──────┘
       │
       ▼
┌─────────────┐
│/generate-prp│  AI creates implementation plan
└──────┬──────┘
       │
       ▼
┌─────────────┐
│  PRP File   │  Comprehensive blueprint
└──────┬──────┘
       │
       ▼
┌─────────────┐
│/execute-prp │  AI implements the feature
└──────┬──────┘
       │
       ▼
┌─────────────┐
│   Feature   │  ✅ Tested & validated
└─────────────┘
```

## Project Structure

```
sablia-site/
├── .claude/
│   └── commands/
│       ├── generate-prp.md    # Creates PRPs from INITIAL.md
│       └── execute-prp.md     # Implements features from PRPs
├── PRPs/
│   ├── templates/
│   │   └── prp_base.md        # Template for new PRPs
│   ├── README.md              # PRP documentation
│   └── [your-prps].md         # Generated implementation plans
├── examples/
│   ├── README.md              # Guide for adding examples
│   └── [your-examples]/       # Code examples for AI to follow
├── INITIAL.md                 # Template for feature requests
├── CLAUDE.md                  # Project rules & context engineering guide
└── CONTEXT_ENGINEERING.md     # This file
```

## The Four Pillars of Context Engineering

### 1. INITIAL.md - Feature Definition

The starting point for any feature. Must include:

**FEATURE**: What you're building and why

- Be specific about functionality
- Include user-facing behavior
- Mention technical requirements

**EXAMPLES**: Code patterns to follow

- Reference files in `examples/` folder
- Explain what patterns to mimic
- The more examples, the better

**DOCUMENTATION**: Resources for the AI

- API documentation with specific sections
- Library guides
- Best practices articles

**OTHER CONSIDERATIONS**: Important details

- Common gotchas
- Performance needs
- Security requirements
- Edge cases

### 2. Examples - Pattern Library

The `examples/` folder is **critical**. AI performs 10x better with concrete examples.

What to include:

- React component patterns
- Form implementations
- API integration patterns
- Error handling approaches
- Testing patterns

See `examples/README.md` for detailed guidance.

### 3. PRPs - Implementation Blueprints

Generated by `/generate-prp`, a PRP includes:

- Complete context and documentation
- Real code snippets from your codebase
- Step-by-step implementation tasks
- Validation commands
- Known gotchas and pitfalls
- Success criteria

See `PRPs/README.md` for detailed guidance.

### 4. Validation - Quality Gates

Every PRP includes commands that MUST pass:

```bash
npm run check    # TypeScript validation
npm run build    # Production build
npm test         # Tests (when applicable)
```

The AI iterates until everything passes.

## Why This Works

### Traditional Prompt Engineering

- Limited to how you phrase a request
- AI guesses at your patterns
- Requires many iterations
- Inconsistent results

### Context Engineering

- **Comprehensive Context**: Everything AI needs in one place
- **Pattern Following**: Real examples show the right way
- **Self-Validation**: AI tests and fixes its own work
- **Consistent Quality**: Same patterns every time

## Real World Example

Let's build a ROI calculator component.

### Step 1: Create INITIAL.md

```markdown
## FEATURE:

Interactive ROI calculator component that helps prospects estimate
their savings from business automation. Should include:

- Input fields for current process metrics
- Real-time calculation display
- Results visualization with charts
- Lead capture form integration

## EXAMPLES:

- examples/components/FormExample.tsx - Form structure with validation
- examples/components/CardExample.tsx - Card layout pattern
- See existing ContactForm for lead capture pattern

## DOCUMENTATION:

- Recharts for visualization: https://recharts.org/en-US/guide
- React Hook Form: https://react-hook-form.com/
- Zod validation: https://zod.dev/

## OTHER CONSIDERATIONS:

- Must work on mobile (responsive)
- Calculations should be instant (no API calls for calc)
- Store results in database when user submits contact info
- Include social proof ("Join 500+ companies" badge)
- Form must validate business email (no @gmail, @yahoo)
```

### Step 2: Generate PRP

```bash
/generate-prp INITIAL.md
```

AI researches your codebase, finds patterns, and creates:
`PRPs/roi-calculator-component.md`

### Step 3: Review PRP (Optional)

Open the generated PRP and verify:

- Confidence score is 8+ (out of 10)
- References correct patterns
- Includes all necessary context

If score is low, add more to `INITIAL.md` and regenerate.

### Step 4: Execute PRP

```bash
/execute-prp PRPs/roi-calculator-component.md
```

AI will:

1. Create component structure
2. Implement form with validation
3. Add calculation logic
4. Integrate charts
5. Add to routing
6. Run validation
7. Fix any issues
8. Report completion

### Step 5: Done!

Feature is built, tested, and follows your patterns.

## Best Practices

### 1. Build a Strong Examples Library

Start by adding:

1. A complete form component
2. A page with data fetching
3. An API integration example

These cover 80% of feature types.

### 2. Be Specific in INITIAL.md

❌ "Build a contact form"
✅ "Build a contact form with name, email, phone, and message fields. Use React Hook Form with Zod validation. Integrate with Calendly for scheduling. Show loading state during submission."

### 3. Reference Examples Liberally

❌ "Use standard patterns"
✅ "Follow the form pattern in examples/components/FormExample.tsx, especially the validation error display and loading states"

### 4. Include Documentation URLs

❌ "Use the API"
✅ "Calendly API - Event Types: https://developer.calendly.com/api-docs/event-types
Specifically the scheduling links section"

### 5. Mention Gotchas

❌ Silent about potential issues
✅ "The Calendly widget must load after DOM is ready. Common error: 'Calendly is not defined' - ensure script loads in useEffect"

## Iterating and Improving

### After Each Feature

1. **What went well?** Note successful patterns
2. **What didn't?** Identify missing context
3. **Update examples** if new patterns emerged
4. **Improve PRP template** if gaps were found

### Building Your Context Library

Each feature you build adds to your context:

- PRPs can be reused for similar features
- Examples grow more comprehensive
- CLAUDE.md captures project-specific patterns

After 5-10 features, you'll have a rich context library that makes subsequent features trivially easy.

## Common Patterns for Sablia

When creating PRPs for this project, ensure they include:

### React Components

- Functional components with TypeScript
- Props interfaces
- Default exports
- Tailwind CSS for styling
- shadcn/ui components when applicable

### Forms

- React Hook Form for state management
- Zod for validation schemas
- Error message display
- Loading states
- Success feedback

### API Integration

- React Query (TanStack Query) for data fetching
- Error handling with try/catch
- Loading and error states
- Proper TypeScript types for requests/responses

### Routing

- Wouter for client-side routing
- Route definitions in main App component
- Link component for navigation

### State Management

- React Query for server state
- useState/useReducer for local UI state
- Context only when necessary

## Troubleshooting

### Issue: PRP Confidence Score < 8

**Solution**: Add more context to INITIAL.md

- More specific examples
- Additional documentation
- More detailed requirements

### Issue: Generated Code Doesn't Match Patterns

**Solution**: Improve your examples/ folder

- Add more examples
- Make examples more comprehensive
- Reference specific patterns in INITIAL.md

### Issue: Validation Fails

**Solution**: This is actually good!

- AI will iterate and fix
- If it can't fix, the PRP needs more context
- Add the solution to PRP as a "gotcha"

### Issue: Feature Works But Not Quite Right

**Solution**: Iterate on the PRP

- Add the missing requirements
- Include the desired outcome as an example
- Run /execute-prp again

## Advanced Techniques

### Reusing PRPs

Have a similar feature to build?

1. Copy the most similar PRP
2. Find/replace to update specifics
3. Modify requirements as needed
4. Execute the modified PRP

### Chaining Features

Build complex features step by step:

1. Create INITIAL.md for foundation
2. Execute to build base
3. Create INITIAL.md for enhancement
4. Execute to add features
5. Repeat as needed

### Testing PRPs

Before executing a new PRP pattern:

1. Review the generated PRP thoroughly
2. Check that all examples are referenced
3. Verify validation commands are correct
4. Confirm success criteria are measurable

## Getting Help

If you're stuck:

1. Check `CLAUDE.md` for project-specific guidance
2. Review `examples/` for pattern inspiration
3. Look at existing PRPs for similar features
4. Ask Claude Code to explain the methodology

## Resources

- **Context Engineering Intro**: https://github.com/coleam00/context-engineering-intro
- **Claude Code Docs**: https://docs.anthropic.com/en/docs/claude-code
- **Project Patterns**: See CLAUDE.md
- **Example PRPs**: Browse PRPs/ folder
- **Code Examples**: Browse examples/ folder

---

Remember: **Context Engineering > Prompt Engineering > Vibe Coding**

The time you invest in creating good context (INITIAL.md, examples, PRPs) pays massive dividends in consistent, high-quality implementations.
